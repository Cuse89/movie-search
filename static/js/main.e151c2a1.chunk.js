(this["webpackJsonpmovie-search"]=this["webpackJsonpmovie-search"]||[]).push([[0],{11:function(e,t,a){e.exports={root:"Pagination_root__3lGdY",leftArrow:"Pagination_leftArrow__2eMcd",rightArrow:"Pagination_rightArrow__2ExW5"}},13:function(e,t,a){e.exports={root:"InputForm_root__3bnSa",submit:"InputForm_submit__Dtu_C"}},15:function(e,t,a){e.exports={goBack:"withGoBack_goBack__1_R3d",goBackText:"withGoBack_goBackText__3dGnk"}},18:function(e,t,a){e.exports={root:"Header_root__uYivO",title:"Header_title__3s_xf"}},23:function(e,t,a){e.exports={root:"MovieItem_root__cYwCf"}},25:function(e,t,a){e.exports={root:"SearchPage_root__uMsEA"}},26:function(e,t,a){e.exports={root:"MoviePage_root__UNp6Z"}},29:function(e,t,a){e.exports=a(43)},34:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(22),c=a.n(r),l=(a(34),a(5)),i=a(4),s=a(1),u=a(19),m=function(e){var t=window.location.search;return new URLSearchParams(t).get(e)},g="https://api.themoviedb.org/3/",h="c9699c83834bc31ef87390d9331e4c96",f="ready",p="fetching",v="complete",d=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],o=t[1],r=Object(n.useState)({page:m("page")||1,totalPages:0,totalResults:0}),c=Object(s.a)(r,2),l=c[0],i=c[1],u=Object(n.useState)(f),p=Object(s.a)(u,2),d=p[0],E=p[1],_=Object(n.useState)(!1),b=Object(s.a)(_,2),P=b[0],w=b[1];return{movies:a,getMovies:function(e){var t,a=(t=e,Object.keys(t).map((function(e){return"".concat(e,"=").concat(t[e])})).join("&")),n="".concat(g,"search/movie?api_key=").concat(h,"&").concat(a);E("fetching"),fetch(n).then((function(e){return e.json()})).then((function(e){!function(e){var t=e.results,a=e.page,n=e.total_results,r=e.total_pages;t.length>0?o(function(e){return e.map((function(e){return{id:e.id,title:e.title}}))}(t)):o([]),i({page:a,totalPages:r,totalResults:n})}(e),E(v)})).catch((function(e){E(v),w(!0)}))},pagination:l,fetchStatus:d,hasError:P}},E=a(13),_=a.n(E),b=function(e){var t=e.inputType,a=e.placeholder,r=e.autoComplete,c=e.onChange,l=e.onSubmit,i=e.submitText,u=e.validateInput,m=e.label,g=Object(n.useState)(""),h=Object(s.a)(g,2),f=h[0],p=h[1],v=u(f);return o.a.createElement("form",{className:_.a.root,onSubmit:function(e){e.preventDefault(),l&&(l(f),p(""))}},m&&o.a.createElement("label",null,m),o.a.createElement("input",{type:t,onChange:function(e){e.preventDefault(),c(e.target.value),p(e.target.value)},placeholder:a,value:f,autoComplete:r}),l&&v&&o.a.createElement("input",{className:_.a.submit,type:"submit",value:i,disabled:!v}))};b.defaultProps={inputType:"text",placeholder:"",autoComplete:"off",onChange:function(){},submitText:"Submit",validateInput:function(){return!0},label:""};var P=b,w=a(7),O=a(8),j=a(11),k=a.n(j),x=function(e){var t=e.page,a=e.onPreviousPageClick,n=e.onNextPageClick,r=e.totalPages;return o.a.createElement("div",{className:k.a.root},t>1&&o.a.createElement(w.FontAwesomeIcon,{className:k.a.leftArrow,icon:O.a,onClick:a}),"Page ",t," out of ",r,t<r&&o.a.createElement(w.FontAwesomeIcon,{className:k.a.rightArrow,icon:O.b,onClick:n}))},C=function(e){var t=e.className,a=e.results,n=e.resultItem,r=e.onPaginationChange,c=e.resultsPerPage,l=e.totalResults,i=e.totalPages,s=e.page,u=e.noResultsText,m=e.hasError,g=e.errorMessage,h=c&&a.length<l,f=o.a.createElement(x,{onPreviousPageClick:function(){r(s-1)},onNextPageClick:function(){r(s+1)},page:s,totalPages:i}),p=u&&0===a.length&&!m,v=m&&g;return o.a.createElement("div",{className:t},h&&f,a.length>0&&function(){for(var e=[],t=a.length<c?a.length:c,o=0;o<t;o++)e.push(n(a[o]));return e}(),h&&f,p&&o.a.createElement("h3",null,u),v&&o.a.createElement("h3",null,g))};C.defaultProps={results:[],onPaginationChange:function(){},resultsPerPage:10,noResultsText:"No results",errorMessage:"An error has occurred."};var N=C,S=a(23),y=a.n(S),T=Object(n.memo)((function(e){var t=e.id,a=e.title,n=e.onClick;return o.a.createElement("div",{className:y.a.root,onClick:function(){return n(t)}},a)})),B=a(24),I=a(14),M=a.n(I),A=a(9),F=a.n(A),R=function(e){var t=e.show,a=e.size,r=e.color,c=e.isContained,l=e.delay,i=e.children,u=Object(n.useState)(l>0),m=Object(s.a)(u,2),g=m[0],h=m[1],f=M()([F.a.image],[F.a[a]],[F.a[r]]);return Object(n.useEffect)((function(){var e=!0;return t&&l>0&&setTimeout((function(){e&&h(!1)}),l),function(){return e=!1}}),[l,t]),t&&!g?o.a.createElement("div",{className:M()(Object(B.a)({},F.a.contained,c))},o.a.createElement("img",{className:f,src:"/tail-spin.svg",alt:"loader"})):i};R.defaultProps={size:"medium",color:"darkBlue",isContained:!1,delay:500};var L=R,z=a(25),G=a.n(z),Y=function(e){var t=e.history,a=d(),r=a.getMovies,c=a.movies,l=a.pagination,i=a.fetchStatus,m=a.hasError,g=l.totalResults,h=l.totalPages,f=Object(u.a)("query",""),E=Object(s.a)(f,2),_=E[0],b=E[1],w=Object(u.a)("page",1),O=Object(s.a)(w,2),j=O[0],k=O[1];Object(n.useEffect)((function(){_&&r({query:_,page:j})}),[_,j]);var x=function(e){t.push("./movie/".concat(e))},C=_&&c.length>0;return o.a.createElement("div",{className:G.a.root},o.a.createElement(P,{placeholder:"Search for a movie...",onChange:function(e){k(1),b(e)}}),_&&o.a.createElement(L,{show:i===p},i===v&&o.a.createElement(n.Fragment,null,C&&o.a.createElement("h3",null,"Showing Movies: ",_),o.a.createElement(N,{results:c,resultItem:function(e){var t=e.id,a=e.title;return o.a.createElement(T,{key:"movieItem".concat(t),id:t,title:a,onClick:x})},page:j,resultsPerPage:20,onPaginationChange:k,totalResults:g,totalPages:h,noResultsText:"No movies found.",hasError:m,errorMessage:"Oops something went wrong, please try again.",fetchStatus:i}))))},D={small:100,medium:200,large:300},U=function(e){var t=e.path,a=e.size;return o.a.createElement(n.Fragment,null,o.a.createElement("img",{src:"https://image.tmdb.org/t/p/w".concat(D[a],"/").concat(t)}))};U.defaultProps={size:"medium"};var W=U,q=function(e){var t=e.title,a=e.overview,r=e.posterPath;return o.a.createElement(n.Fragment,null,t&&o.a.createElement(n.Fragment,null,o.a.createElement("h3",null,"Title:"),t),a&&o.a.createElement(n.Fragment,null,o.a.createElement("h3",null,"About:"),a),r&&o.a.createElement(n.Fragment,null,o.a.createElement("h3",null,"Image:"),o.a.createElement(W,{path:r})))};q.defaultProps={title:"",overview:"",posterPath:""};var H=q,J=a(15),V=a.n(J),K=function(e){var t=e.withText,a=e.className;return function(e){return function(n){var r=n.history;return o.a.createElement("div",{className:a},o.a.createElement("div",{className:V.a.goBack,onClick:function(){return r.goBack()}},o.a.createElement(w.FontAwesomeIcon,{icon:O.a,size:"1x"}),t&&o.a.createElement("p",{className:V.a.goBackText},"Go back")),o.a.createElement(e,null))}}};K.defaultProps={withText:!1};var X=K,Z=a(26),$=function(){var e=Object(n.useState)({}),t=Object(s.a)(e,2),a=t[0],o=t[1],r=Object(n.useState)(f),c=Object(s.a)(r,2),l=c[0],i=c[1],u=Object(n.useState)(!1),m=Object(s.a)(u,2),d=m[0],E=m[1];return{movie:a,getMovie:function(e){var t="".concat(g,"movie/").concat(e,"?api_key=").concat(h);i(p),fetch(t).then((function(e){return e.json()})).then((function(e){i(v),function(e){o(function(e){return{title:e.title,overview:e.overview,posterPath:e.poster_path}}(e))}(e)})).catch((function(e){i(v),E(!0)}))},fetchStatus:l,hasError:d}},Q=X({withText:!0,className:a.n(Z).a.root})((function(){var e=Object(i.g)().id,t=$(),a=t.movie,r=t.getMovie,c=t.fetchStatus,l=t.hasError,s=a.overview,u=a.posterPath,m=a.title;return Object(n.useEffect)((function(){r(e)}),[e]),o.a.createElement(L,{show:c===p},c===v&&o.a.createElement(H,{overview:s,posterPath:u,title:m}),l&&o.a.createElement("h3",null,"There was an error, please try again."))})),ee=a(18),te=a.n(ee),ae=function(){return o.a.createElement("div",{className:te.a.root},o.a.createElement(l.b,{to:"/search"},o.a.createElement("h1",{className:te.a.title},"Movie Universe")))},ne=function(){return o.a.createElement(n.Fragment,null,"Oops this page doesn't exist. Click ",o.a.createElement(l.b,{to:"./"}," here ")," to go to the homepage.")},oe=function(){return o.a.createElement("div",null,o.a.createElement(l.a,null,o.a.createElement(ae,null),o.a.createElement(i.d,null,o.a.createElement(i.b,{exact:!0,path:"/",render:function(){return o.a.createElement(i.a,{to:"/search"})}}),o.a.createElement(i.b,{path:"/search",component:Y}),o.a.createElement(i.b,{path:"/movie/:id",component:Q}),o.a.createElement(i.b,{component:ne}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(oe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},9:function(e,t,a){e.exports={contained:"Loader_contained__3xlTO",image:"Loader_image__1z8IK",blue:"Loader_blue__1dP5O",darkBlue:"Loader_darkBlue__OjVYV",small:"Loader_small__226zT",medium:"Loader_medium__2mexX",large:"Loader_large__3CeB9"}}},[[29,1,2]]]);
//# sourceMappingURL=main.e151c2a1.chunk.js.map